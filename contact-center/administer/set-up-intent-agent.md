---
title: Configure intent-based suggestions for Copilot agents
description: Learn how to configure intent-based suggestions for Copilot agents using Customer Intent Agent to automate and streamline the contact center operations.
author: Soumyasd27
ms.author: sdas
ms.reviewer: Soumyasd27
ms.topic: how-to
ms.collection:
ms.date: 11/07/2025
ms.custom: bap-template
---

# Configure intent-based suggestions for Copilot agents

Customer Intent Agent discovers intent from historical data and maintains an up-to-date intent library, with attributes to support intent determination, interview, and fulfillment, leading to higher deflection rates.

[!INCLUDE [cc-rebrand-bot-agent](../includes/cc-rebrand-bot-agent.md)]

Customer Intent Agent uses the determined intent and interview responses to improve the quality of generated answers for both Copilot agents and service representatives. This article describes how you can configure Copilot agents with Customer Intent Agent to provide updated solutions for customer issues that come through chat and messaging channels.

You can also set up Customer Intent Agent for voice agents that uses generative AI to autonomously discover intents in your contact center instance. Learn more in [Set up voice agents to use intents](set-up-voice-agents-to-use-intents.md).

## Prerequisites

Before you proceed, make sure you:

- [Enable Customer Intent Agent](manage-customer-intent-agent.md#enable-customer-intent-agent).
- [Set up intent discovery and add intents to the intent library](manage-customer-intent-agent.md#manage-intent-discovery-setup).
- To use intents with Copilot agents, enable the **Use in AI Agents** checkbox for that specific intent.
- Connect your Copilot agent to knowledge sources and a workstream in omnichannel.
- Assign the **Environment Maker** role to makers.
- Get the administrator role to add connection references.

## How it works

- An administrator sets up intent, uses historical data to build the intent library, and enables the library for Copilot agents and representatives.  

- The Copilot agent detects intent from the customer, asks follow-up questions related to the intent, and provides a solution based on customer-provided information from the connected Copilot agent knowledge source.
- If the issue is escalated, it is transferred to representatives. The Customer Intent Agent persists the intent and the interview questions generated by the Copilot agents. The service representative goes through unanswered questions with customer and gets an updated solution.
- The application also uses this conversation to detect any updates and discover new intent attributes that can be used in future interviews.
- In the next customer interaction with a Copilot agent, the agent can deal with the customer issue with the newly-generated knowledge and intent, and provide a tailored response without escalating to any representative.

## Set up Copilot agents for intent management

1. In Copilot Service admin center, navigate to the **Customer Intent Agent** page > **Intent-based suggestions** section.
1. Select **Enable for chatbots** and then select **Manage**. The **AI Agents** page appears.
1. Select the Copilot agent connected to your contact center environment.
1. Select **Add intent-based features**, which takes you to **Manage component collections** in Microsoft Copilot Studio.
    1. In **Manage component collections**, search for and select **Intent-based suggestions**.
    1. Select **Add agent**. You can also disconnect a Copilot agent to stop agent transfers for that Copilot agent by selecting **Remove from agent**.
    1. Select **Publish**. A series of Intent-based suggestions topics are added to your agent.

## Add connection references

Add connection references for each new organization once, even if you add multiple agents to the organization. Learn more in [Add connection references to a solution](/power-apps/maker/data-platform/create-connection-reference#add-connection-references-to-a-solution).

1. Sign in to [make.powerapps.com](https://make.powerapps.com) and select your environment.
1. Go to **Solutions** > **Default Solution** > **Objects** > **Connection References**.
1. Search for the **IA.Cr.IAPluginDVConnector** connection reference.
1. Create a connection to **Microsoft Dataverse**, and ensure that the user has administrator privileges.  
1. Go to Microsoft Copilot Studio, complete the [user authentication](#user-authentication) setup, and [publish the agent](/microsoft-copilot-studio/publication-fundamentals-publish-channels?tabs=web).

## User authentication

By default, users must be authenticated to access the Microsoft Dataverse instance to connect to the intent library and get an intent response.

You can switch to Copilot author authentication if users connecting to Copilot Studio don't have access to the Dataverse instance.

1. In Microsoft Copilot Studio, open the **Intent-based suggestions – Plugin** topic. 
1. Select the  ellipsis next to **Connect action** > **Properties**.
1. Select the **End user authentication** dropdown and change it from **User authentication** to **Copilot author authentication**. 

## Connect to intent-based suggestions

To use Customer Intent Agent, you need to connect your Copilot agent to a knowledge source in Microsoft Copilot Studio. Learn more in [Add knowledge to an agent](/microsoft-copilot-studio/knowledge-add-existing-copilot).

In your existing topic flow, where you want to use Customer Intent Agent, add the following node:

**Topic management** > **Go to another topic** > **Intent-based suggestions – Main**

:::image type="content" source="../media/customer-intent-agent-topic.png" alt-text="Screenshot of intent-based suggestions topic flow.":::

## Variables for intent-based suggestions

|Variable |Mapped system topic| Description|
|---------|---------|---------|
|Global.IntentRedirectOnResolutionConfirmation|  EndOfConversation |  Handoff happens when the customer confirms that their issue has been resolved. |
|Global.IntentRedirectOnUnknownIntent    |  Escalate |  Handoff happens when the customer doesn't provide an intent after multiple retries.|
|Global.IntentRedirectOnUnableToProceed |Escalate |  Handoff happens when the customer's issue isn't resolved. Common reasons include insufficient information to answer the customer's question, lack of access to the necessary tools to perform the requested action, or uncooperative behavior from the customer.|
|Global.IntentRedirectOnEscalate    | Escalate  | Handoff happens when the customer explicitly states that they want to escalate or talk to a representative.|
|Global.IntentRedirectOnError |  OnError | Handoff occurs when there’s a service error. The error could be an issue with the service itself, or an error while querying knowledge or performing an action.|

> [!NOTE]
> If the Copilot agent doesn't have any of the mapped variables, you can [override the default variable](#override-default-variable).

### Override default variable

To override any of the variables in Copilot Studio for the intent-based suggestions:

1. Go to the **System** > **Conversation start** topic.
1. Select **Add node (+)** and **Variable management** > **Set a variable value**.
1. Select the variable that you want to change and update the value.
1. Save and publish the agent.

Learn more in [Work with variables](/microsoft-copilot-studio/authoring-variables?tabs=webApp).

## Configure variable enrichment from other sources

Enrichment Context lets Copilot agents use information collected before the intent is identified, so customers don’t have to repeat details. For example, a pre-chat survey can send data like contact info or account numbers to the Customer Intent Agent through the Global.EnrichmentContext parameter. This ensures key details are available at the beginning, helping with intent classification, interview flows, and fulfillment. By reducing repeated questions, Enrichment Context improves customer experience and speeds up issue resolution.

Make sure you have [enabled Customer Intent Agent](manage-customer-intent-agent.md#enable-customer-intent-agent) and [configured intent-based suggestions for Copilot agents](#connect-to-intent-based-suggestions).

### How it works

- For each new conversation, administrators can configure EnrichmentContext to pass pre-collected details into the Customer Intent Agent. 
- This is done by setting the global parameter **Global.EnrichmentContext** in the Microsoft Copilot Studio bot. The payload includes key-value pairs with descriptions of each attribute. 
- For example, a book-ordering scenario might include details such as the book title and author:

    ``
      {
        AdditionalInformation: [
            {
                Key: "Book Title",
                Value: Global.BookTitle,
                KeyDescription: "Information about the desired book order"
            },
            {
                Key: "Book Author",
                Value: Global.BookAuthor,
                KeyDescription: "Information about the desired book author"
            }                
        ]
    }
    
    ``

- When configured, the bot can use this pre-chat context at the start of the interaction, avoiding repeated questions to the customer. 
- This ensures intent determination and fulfillment begin with richer context, enabling more accurate and efficient responses. 

Here's an example.

A common use case for EnrichmentContext is integrating it with a pre-chat survey. This approach ensures customers aren’t asked for the same details twice.

To configure EnrichmentContext with a pre-chat survey:

1. [Configure a preconversation survey](/dynamics365/customer-service/administer/configure-pre-chat-survey).
1. Make sure your Microsoft Copilot Studio bot has global variables for each survey question.
1. Append the global variables to the **Global.EnrichmentContext** variable.
    1. Validate that each variable contains correct values and is properly formatted before adding it to the enrichment context. Make sure that every EnrichmentContext variable includes proper validation. For example, apply separate validation rules for **Global.PhoneNumber** and **Global.AccountNumber**.
    1. Test the live chat widget to make sure that pre-chat survey inputs are passed correctly and customers aren’t asked for the same information again.

## Updates to Customer Intent Agent

Customer Intent Agents might receive periodic updates that update the corresponding component collection. To get access and receive these updates, you need to manually publish your Copilot agent.

## Related information

[Create a copilot](/microsoft-copilot-studio/authoring-first-bot?tabs=web#create-a-copilot)  
[Add knowledge to a copilot](/microsoft-copilot-studio/knowledge-add-existing-copilot)  
[Global variables](/microsoft-copilot-studio/authoring-variables-bot?tabs=webApp)  
