---
title: Configure intent-based suggestions for Copilot agents (preview)
description: Learn how to configure intent-based suggestions for Copilot agents using Customer Intent Agent to automate and streamline the process.
author: Soumyasd27
ms.author: sdas
ms.reviewer: Soumyasd27
ms.topic: how-to
ms.collection:
ms.date: 06/16/2025
ms.custom: bap-template
---

# Configure intent-based suggestions for Copilot agents (preview)

[!INCLUDE [preview-banner](~/../shared-content/shared/preview-includes/preview-banner.md)]

Customer Intent Agent discovers intent from historical data and maintains an up-to-date intent library, along with attributes to support intent determination, interview, and fulfillment, leading to higher deflection rates.

[!INCLUDE [cc-rebrand-bot-agent](../includes/cc-rebrand-bot-agent.md)]

Customer Intent Agent uses the determined intent and interview responses to improve the quality of generated answers for both Copilot agents and customer service representatives (service representatives or representatives).

You can configure Copilot agents with Customer Intent Agent to provide updated solutions for customer issues.

[!INCLUDE [preview-banner](~/../shared-content/shared/preview-includes/preview-note-d365.md)]

## Prerequisites

Before you proceed, make sure you:

- [Enable Customer Intent Agent](manage-customer-intent-agent.md#enable-customer-intent-agent).
- [Set up intent discovery and add intents to the intent library](manage-customer-intent-agent.md#manage-intent-discovery-setup).
- To use intents with Copilot agents, enable the **Use in AI Agents** checkbox for that specific intent.
- Connect your Copilot agent to knowledge sources and a workstream in omnichannel.
- Assign the **Environment Maker** role to makers.
- Get the administrator role to add connection references. 

## How it works

- An administrator sets up intent, uses historical data to build the intent library, and enables the library for Copilot agents and representatives.
- The Copilot agent detects intent from the customer, asks follow-up questions related to the intent, and provides a solution based on customer-provided information from the connected Copilot agent knowledge source.
- If the issue is escalated, it is transferred to representatives. The Customer Intent Agent persists the intent and the interview questions generated by the Copilot agents. The service representative goes through unanswered questions with customer and gets an updated solution.
- The application also uses this conversation to detect any updates and discover new intent attributes that can be used in future interviews.
- In the next customer interaction with a Copilot agent, the agent can deal with the customer issue with the newly generated knowledge and intent, and provide a tailored response without escalating to any representative.

## Set up Copilot agents for intent management

1. In Copilot Service admin center, navigate to the **Customer Intent Agent (preview)** page > **Intent-based suggestions** section.
1. Select **Enable for chatbots** and then select **Manage**. The **Bots** page appears.
1. Select the agent connected to your omnichannel environment for agent transfers.
1. Select **Add intent-based features**, which takes you to **Manage component collections (preview)** in Microsoft Copilot Studio.
1.	In **Manage component collections (preview)**, search for and select **Intent-based suggestions (preview)**.
1.	Select **Add agent**. You can also disconnect a Copilot agent to stop agent transfers for that Copilot agent by selecting **Remove from agent**.
1. Select **Publish**. Once added, a series of Intent-based suggestions topics are added to your agent.

## Add connection references

Add connection references for each new organization once, even if you add multiple agents to the organization. Learn more in [Add connection references to a solution](/power-apps/maker/data-platform/create-connection-reference#add-connection-references-to-a-solution).

1. Sign in to [make.powerapps.com](https://make.powerapps.com) and select your environment.
1. Go to **Solutions** > **Default Solution** > **Objects** > **Connection References**.
1. Search for the **IA.Cr.IAPluginDVConnector** connection reference.
1. Create a connection to **Microsoft Dataverse**, and ensure that the user has administrator privileges.  
1. Go to Microsoft Copilot Studio, complete the [user authentication](#user-authentication) setup, and [publish the agent](/microsoft-copilot-studio/publication-fundamentals-publish-channels?tabs=web).

## User authentication

By default, users must be authenticated to access the Microsoft Dataverse instance to connect to the intent library and get an intent response. 

You can switch to Copilot author authentication if users connecting to Copilot Studio don't have access to the Dataverse instance.

1. In Microsoft Copilot Studio, open the **Intent-based suggestions – Plugin** topic. 
1. Select the  ellipsis next to **Connect action** > **Properties**.
1. Select the **End user authentication** dropdown and change it from **User authentication** to **Copilot author authentication**. 

## Connect to intent-based suggestions 

To use Customer Intent Agent, you need to connect your Copilot agent to a knowledge source in Microsoft Copilot Studio. Learn more in [Add knowledge to an agent](/microsoft-copilot-studio/knowledge-add-existing-copilot).

1. In your existing topic flow, where you want to use Customer Intent Agent, add the following node:
     - **Topic management** > **Go to another topic** > **Intent-based suggestions – Main**.
     - For a default agent, add this node to either the **Conversational boosting** or **Fallback** system topic that triggers from the **On Unknown Intent** topic.
1. Add another node: **Advanced** > **Create generative answers**, and select **SolutionQuery for Input**. Adding a **SolutionQuery** helps generate information from the determined intent and answered questions to search knowledge sources for a solution response. Ensure you edit your data sources and check all the sources you want to search against for an answer.
1. Add another node: **Add a condition**, and set **Answer** variable to **is not Blank**.
1. To add logic to complete the conversation flow after providing an answer, add another node: **Topic management** > **Go to another topic** > **End current topic**.

:::image type="content" source="../media/customer-intent-agent-topic.png" alt-text="Screenshot of intent-based suggestions topic flow.":::

## Connect to your knowledge base

Connect the knowledge articles in your Dynamics 365 instance to your Copilot agent. Learn more in [Integrate knowledge management in Dynamics 365 with Copilot agents](/dynamics365/customer-service/administer/integrate-km-with-pva).

Make sure that you add the new flow, created in Power Automate called **Generate answer from Dataverse knowledge articles for Power Virtual Agent**, to the **Handoff** topic instead of using generative answer. 

### Intent-based suggestions output variables

This section lists the output variables from Customer Intent Agent that provide information about the status of intent determination and interview. Depending on your use case, you can customize these variables for specific situations.

|Variable  |Scenario |
|---------|---------|
|Global.IntentInterviewComplete    |  If set to true, ensures that the intent is determined and all the interview questions were answered.       |
|Global.IntentInterviewIncomplete    |   If set to true, indicates that the intent is determined but not all interview questions were answered. You can still query knowledge based on the information gathered, but you might choose a different behavior.  |
|Global.IntentUndetected     |    If set to true, indicates that a known intent from the intent library wasn't detected, or was detected but rejected by the customer. |
|Global.IntentDetectedWithoutAttributes  |  If set to true, indicates that an intent has been successfully detected, but there are no associated interview questions to ask the user. A solutionQuery is still generated and available for use.  |
|Global.IntentError    |     If set to true, indicates that there was an error in detecting intent. The issue could be transitory like a time-out, but if it's consistent, we recommend that you disable intent-based suggestions and contact support. | 

## Variables in the Intent-based suggestions - Configuration topic

The **Intent-based suggestions - Configuration** is a noncustomizable topic that contains a list of variables that can be overwritten to provide the desired behavior. Here's a list of variables in the topic. 

|Variable  |Default |Description  |
|---------|---------|---------|
|Global.EnableIntentConfirmation    |    False     |      If enabled, agent asks the customer to confirm the intent before moving on to the intent attributes questions.    |
|Global.EnableIntentRephrase     |   False      |    If enabled, and if intent can't be determined or intent isn't confirmed by customer, customers are asked to rephrase their issue.      |
|Global.RephraseCount     |     1    |   Determines how many times customers are asked to rephrase before they give up.|
|Global.MaxRepetitionCount    |  2      | Sets the maximum number of times the agent repeats an interview question with the same attributes. If the user doesn't provide a valid response on the first attempt, the agent asks the question again. If the user still doesn't answer, the agent moves to the next question. |
|Global.EnableAskAllQuestions     |   False       |    If enabled, asks all intent-attribute questions before ending the loop, regardless of whether the customer answers the question in the next turn. If disabled, as soon as the customer doesn’t answer an intent attribute question, ends the loop (a solution query is still generated and generated answers are still initiated).      |

### Override default variable

To override any of the variables for the intent-based suggestions:

1. Go to the **System** > **Conversation start** topic.
1. Select **Add node (+)** and **Variable management** > **Set a variable value**.
1. Select the variable that you want to change and update the value.
1. Save and publish the agent.

Learn more in [Work with variables](/microsoft-copilot-studio/authoring-variables?tabs=webApp).

## Updates to Customer Intent Agent

Customer Intent Agents might receive periodic updates that update the corresponding component collection. To get access and receive these updates, you need to manually publish your Copilot agent.

## Related information

- [Create a copilot](/microsoft-copilot-studio/authoring-first-bot?tabs=web#create-a-copilot)  
- [Add knowledge to a copilot](/microsoft-copilot-studio/knowledge-add-existing-copilot)  
- [Global variables](/microsoft-copilot-studio/authoring-variables-bot?tabs=webApp)  
